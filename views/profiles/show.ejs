<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/profile/show.css" />
<%- include('../partials/nav') %>

<main>
  <% if (user.profile.equals(profile)) { %>
    <h1>Hello, <%= profile.name %></h1>
    <% } else { %>
      <h1><%= profile.name %>'s Profile</h1>
  <% } %>
    <div>
      <img
        src="<%= profile.avatar %>"
        alt="<%= profile.name %> avatar"
      />
    </div>
  <section>
    <% if (profile.favoriteplayer.length) { %>
      <h1>Favorite players</h1>
      <ul>
        <% profile.favoriteplayer.forEach(player => { %>
        <li>
          <h2><%= player.name %></h2>
          <p><%= `${player.name} is a ${player.sport} player` %></p>
          <p><%= `They are ${player.age} years old and play for ${player.team}` %></p>
          <% if (isSelf) { %>
            <a href="/profile/<%= user.profile._id %>/favoriteplayer/<%= player._id %>/edit">
              <button>edit</button>
            </a>
            <form action="/profile/<%= user.profile._id %>/favoriteplayer/<%= player._id %>/?_method=DELETE" method="POST">
              <button type="submit">X</button>
            </form>
          <% } %>
        </li>
        <% }) %>
      </ul>
      <a href="/profile/<%= user.profile._id %>/favoriteplayer"><button>Add more favorite players</button></a>
    <% } else { %>
      <h2>No favorite players added</h2>
      <a href="/profile/<%= user.profile._id %>/favoriteplayer"><button>Add favorite players</button></a>
    <% } %>
  </section>
  <section>
    <% if (profile.favoriteteam.length) { %>
      <h1>Favorite Teams</h1>
      <ul>
        <% profile.favoriteteam.forEach(team => { %>
          <li>
            <h2><%= team.name %></h2>
            <p><%= `${team.name} is a ${team.sport} team` %></p>
            <p><%= `Their Achievements: ${team.achievements}` %></p>
            <p><%= `Their Top Players: ${team.topPlayers}` %></p>
            <% if (isSelf) { %>
              <a href="/profile/<%= user.profile._id %>/favoriteteam/<%= team._id %>/edit">
                <button>edit</button>
              </a>
              <form action="/profile/<%= user.profile._id %>/favoriteteam/<%= team._id %>/?_method=DELETE" method="POST">
                <button type="submit">X</button>
              </form>
            <% } %>
          </li>
        <% }) %>
      </ul>
      <a href="/profile/<%= user.profile._id %>/favoriteteam"><button>Add more favorite teams</button></a>
    <% } else { %>
      <h2>No favorite teams added</h2>
      <a href="/profile/<%= user.profile._id %>/favoriteteam"><button>Add favorite teams</button></a>
    <% } %>
  </section>
</main>

<%- include('../partials/footer') %>